---
# vars file for ad_auth
ad_auth_packages:
  - adcli
  - authconfig
  - krb5-libs
  - krb5-workstation
  - oddjob
  - oddjob-mkhomedir
  - pam_krb5
  - realmd
  - samba-common
  - samba-common-tools
  - samba-winbind
  - samba-winbind-clients
  - sssd

ad_auth_smb_options:
  - option: password server
    value: "*"
  - option: winbind nested groups
    value: no
  - option: winbind enum groups
    value: no
  - option: winbind enum users
    value: no
  - option: expand groups
    value: no

ad_auth_authconfig_command: "/sbin/authconfig  --enablekrb5 --enablekrb5kdcdns --enablekrb5realmdns --enablewinbindkrb5 --krb5realm={{ ad_auth_realm }} --enablewins --smbsecurity ads --smbworkgroup=AD --smbrealm {{ ad_auth_realm }} --smbservers={{ ad_auth_realm }} --enablelocauthorize --enablemkhomedir --update"

ad_auth_join_command: "/bin/echo '{{ ad_auth_registration_hash }}' | base64 -d | ccat -E AD | /sbin/realm join --user={{ ad_auth_registration_user }} --computer-ou='OU={{ ad_auth_ou }}' {{ ad_auth_server }} --membership-software=adcli"
